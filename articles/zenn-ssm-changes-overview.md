---
title: "ã€åˆå¿ƒè€…å‘ã‘ã€‘Systems Managerï¼ˆSSMï¼‰ å…¥é–€ï¼å®Œå…¨ã‚¬ã‚¤ãƒ‰â‘¤ï¼ˆå¤‰æ›´ç®¡ç†æ©Ÿèƒ½ç·¨ï¼‰" # è¨˜äº‹ã®ã‚¿ã‚¤ãƒˆãƒ«
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢è¨˜äº‹
topics: ["aws", "study"]
published: true
---

# AWS Systems Managerï¼ˆSSMï¼‰:å¤‰æ›´ç®¡ç†

## â˜˜ï¸ ã¯ã˜ã‚ã«

æœ¬ãƒšãƒ¼ã‚¸ã¯ã€AWS ã«é–¢ã™ã‚‹å€‹äººã®å‹‰å¼·ãŠã‚ˆã³å‹‰å¼·ä¼šã§ä½¿ç”¨ã™ã‚‹ã“ã¨ã‚’ç›®çš„ã«ã€AWS ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãªã©ã‚’å‚ç…§ã—ä½œæˆã—ã¦ãŠã‚Šã¾ã™ãŒã€è¨˜è¼‰ã®èª¤ã‚Šç­‰ãŒå«ã¾ã‚Œã‚‹å ´åˆãŒã”ã–ã„ã¾ã™ã€‚

æœ€æ–°ã®æƒ…å ±ã«ã¤ã„ã¦ã¯ã€AWS å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ã”å‚ç…§ãã ã•ã„ã€‚

## ğŸ‘€ Contents

Duration: 00:01:00

- [AWS Systems Managerï¼ˆSSMï¼‰:å¤‰æ›´ç®¡ç†](#aws-systems-managerssmå¤‰æ›´ç®¡ç†)
  - [â˜˜ï¸ ã¯ã˜ã‚ã«](#ï¸-ã¯ã˜ã‚ã«)
  - [ğŸ‘€ Contents](#-contents)
  - [å¤‰æ›´ç®¡ç†ã®æ©Ÿèƒ½](#å¤‰æ›´ç®¡ç†ã®æ©Ÿèƒ½)
  - [ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦](#ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦)
    - [ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã®æ–™é‡‘](#ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã®æ–™é‡‘)
  - [ã‚ªãƒ¼ãƒˆãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³](#ã‚ªãƒ¼ãƒˆãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³)
    - [ã‚ªãƒ¼ãƒˆãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®æ–™é‡‘](#ã‚ªãƒ¼ãƒˆãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®æ–™é‡‘)
  - [Change Manager](#change-manager)
    - [Change Manager ã®æ–™é‡‘](#change-manager-ã®æ–™é‡‘)
  - [å¤‰æ›´ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼](#å¤‰æ›´ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼)
    - [å¤‰æ›´ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã®æ–™é‡‘](#å¤‰æ›´ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã®æ–™é‡‘)

## å¤‰æ›´ç®¡ç†ã®æ©Ÿèƒ½

Duration: 00:01:00

- å¤‰æ›´ç®¡ç†
  - ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦
  - ã‚ªãƒ¼ãƒˆãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
  - Change Manager
  - Change Calendar

## ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦

Duration: 00:01:00

[AWS Systems Manager Maintenance Windows](https://docs.aws.amazon.com/ja_jp/systems-manager/latest/userguide/systems-manager-maintenance.html)

ãƒ‘ãƒƒãƒé©ç”¨ã‚„ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€OS ã®ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ãªã©ã®ä¸€é€£ã®ã‚¿ã‚¹ã‚¯ã‚’ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«å®Ÿè¡Œã§ãã‚‹æ©Ÿèƒ½ã§ã™ã€‚

![maintenance-window](/images/ssm/maintenance-window.png)

### ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã®æ–™é‡‘

ç„¡æ–™ã§åˆ©ç”¨ã§ãã¾ã™ã€‚

[ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã®æ–™é‡‘](https://aws.amazon.com/jp/systems-manager/pricing/#Maintenance_Windows)

## ã‚ªãƒ¼ãƒˆãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³

Duration: 00:01:00

[AWS Systems Manager Automation](https://docs.aws.amazon.com/ja_jp/systems-manager/latest/userguide/systems-manager-automation.html)

ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ä¸Šã§ãƒªãƒ¢ãƒ¼ãƒˆã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«ã—ãŸã‚‚ã®ã§ã™ã€‚
è‡ªå‹•åŒ–ã§ã¯ãƒªãƒ¢ãƒ¼ãƒˆå‘½ä»¤ä»¥å¤–ã«ã‚‚ã€ä¾‹ãˆã°å®Ÿè¡Œã®ä¸€éƒ¨ã¨ã—ã¦ AWS ã® API ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
SSM è‡ªå‹•åŒ–ã‚¿ã‚¤ãƒ—ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§ã€å¤šãã®æ®µéšã‚’çµ„ã¿åˆã‚ã›ã¦è¤‡é›‘ãªã‚¿ã‚¹ã‚¯ã‚’å®Œäº†ã•ã›ã‚‹ã“ã¨ã‚‚ã‚ã‚Šã¾ã™ã€‚
ãªãŠã€SSM ã‚µãƒ¼ãƒ“ã‚¹ä¸Šã§å‹•ä½œã™ã‚‹è‡ªå‹•ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æœ€å¤§å®Ÿè¡Œæ™‚é–“ AWS ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¨ AWS ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã‚ãŸã‚Šã€1,000,000 ç§’ã¨ãªã‚Šã¾ã™ã€‚

### ã‚ªãƒ¼ãƒˆãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®æ–™é‡‘

ã‚¹ãƒ†ãƒƒãƒ—ã®æ•°ã¨å®Ÿè¡Œæ™‚é–“ã§èª²é‡‘ã•ã‚Œã¾ã™ã€‚

[ã‚ªãƒ¼ãƒˆãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®æ–™é‡‘](https://aws.amazon.com/jp/systems-manager/pricing/#Automation)

## Change Manager

Duration: 00:03:00

[AWS Systems Manager Change Manager](https://docs.aws.amazon.com/ja_jp/systems-manager/latest/userguide/change-manager.html)

AWS ã®å¤‰æ›´ç®¡ç†ã¨ã„ãˆã°ã€ã€ŒAWS CloudTrailã€ã‚„ã€ŒAWS Configã€ã‚’åˆ©ç”¨ã—ãŸè¨¼è·¡ç®¡ç†ãŒã‚ã‚Šã¾ã™ã€‚ãŸã ã€ã“ã‚Œã‚‰ã¯å¤‰æ›´ãŒã‚ã£ãŸäº‹å®Ÿã‚’è¨˜éŒ²ã—ã¦ã„ã‚‹ã ã‘ã§ã‚ã‚Šã€å¤‰æ›´ã«è‡³ã£ãŸçµŒç·¯ãªã©ã¯è¨˜éŒ²ã§ãã¦ã„ã¾ã›ã‚“ã€‚

ãã“ã§ã€ã€Œã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®è¨­å®šã¨ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ã«å¯¾ã™ã‚‹é‹ç”¨ä¸Šã®å¤‰æ›´ã‚’ãƒªã‚¯ã‚¨ã‚¹ãƒˆã€æ‰¿èªã€å®Ÿè£…ã€ãŠã‚ˆã³å ±å‘Šã™ã‚‹ãŸã‚ã®ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºå¤‰æ›´ç®¡ç†ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã€ã‚’æä¾›ã™ã‚‹ Change Manager ã‚’åˆ©ç”¨ã—ã¾ã™ã€‚

![change-manager](/images/ssm/change-manager.png)

ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«ã¯ã€ã‚ªãƒ¼ãƒˆãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’æŒ‡å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ä¾‹ãˆã°ã€EC2 ã®èµ·å‹• `AWS-StartEC2Instance` ã‚’ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼åŒ–ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
![change-manager-start-ec2](/images/ssm/change-manager-start-ec2.png)

ä»–ã«ã¯ã€`AWS-AttachEBSVolume`ã‚„ `AWS-StopRdsInstance` ãªã©ãŒã‚ã‚Šã¾ã™ã€‚

### Change Manager ã®æ–™é‡‘

ã€Œå¤‰æ›´ãƒªã‚¯ã‚¨ã‚¹ãƒˆä»¶æ•°ã€ã¨ãã‚Œã«ã‚ˆã£ã¦å®Ÿè¡Œã•ã‚ŒãŸã€ŒAPI ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ•°ã€ã§èª²é‡‘ã•ã‚Œã¾ã™ã€‚

[Change Manager ã®æ–™é‡‘](https://aws.amazon.com/jp/systems-manager/pricing/#Change_Manager)

## å¤‰æ›´ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼

Duration: 00:10:00

[AWS Systems Manager Change Calendar](https://docs.aws.amazon.com/ja_jp/systems-manager/latest/userguide/systems-manager-change-calendar.html)

é‡è¦ãªã‚¤ãƒ™ãƒ³ãƒˆã‚„è² è·ãŒé›†ä¸­ã™ã‚‹æ™‚é–“å¸¯ã€ãƒãƒƒãƒå‡¦ç†ãŒè¡Œã‚ã‚Œã‚‹æ™‚é–“å¸¯ãªã©ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§ã€å®šæœŸå®Ÿè¡Œå‡¦ç†ã‚’å›é¿ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ä½œæˆã™ã‚‹ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã¯æ¬¡ã® 2 ç¨®é¡ãŒé¸æŠã§ãã¾ã™ã€‚

- Open by default (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã‚ªãƒ¼ãƒ—ãƒ³)
  - ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«ä½œæˆã•ã‚ŒãŸã‚¤ãƒ™ãƒ³ãƒˆã®æœŸé–“ã‚’ä¼‘æ¥­æ—¥ã€ã¤ã¾ã‚Šã€ŒCLOSEã€ã¨æ‰±ã†ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«ãªã‚Šã¾ã™ã€‚
- Closed by default (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã‚¯ãƒ­ãƒ¼ã‚º)
  - ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«ä½œæˆã•ã‚ŒãŸã‚¤ãƒ™ãƒ³ãƒˆã®æœŸé–“ã‚’å–¶æ¥­æ—¥ã€ã¤ã¾ã‚Šã€ŒOPENã€ã¨æ‰±ã†ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«ãªã‚Šã¾ã™ã€‚

ã“ã®é•ã„ã¯ã€ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚’ä½¿ã£ã¦æ—¥ä»˜ã‚’åˆ¤å®šã™ã‚‹ã¨ãã®çµæœã«å½±éŸ¿ã—ã¾ã™ã€‚

`at-time` ã§æŒ‡å®šã—ãŸæ—¥æ™‚ã‚’ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã§ã€ŒOPENã€ã§ã‚ã‚‹ã®ã‹ã€ŒCLOSEDã€ã§ã‚ã‚‹ã®ã‹ã‚’åˆ¤å®šã•ã›ã¾ã™ã€‚ã“ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’çœç•¥ã—ãŸå ´åˆã¯ã€ç¾åœ¨æ—¥æ™‚ãŒä½¿ç”¨ã•ã‚Œã¾ã™ã€‚

â€» æ—¥æ™‚ã®æŒ‡å®šã¯ã€å³å¯†ãªã€Œ[ISO 8601](https://ja.wikipedia.org/wiki/ISO_8601)ã€ã®æ›¸å¼ã«æº–æ‹ ã—ã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

```sh
aws ssm get-calendar-state \
    --calendar-names "arn:aws:ssm:ap-northeast-1:123456789012:document/calendar-name" \
    --at-time "2023-09-18T00:00:00+09:00"
```

ã“ã®ã‚ˆã†ãªçµæœãŒè¿”ã£ã¦ãã¾ã™ã€‚`State` ãŒåˆ¤å®šçµæœã§ã™ã€‚
`AtTime` ã¯ã‚³ãƒãƒ³ãƒ‰ã§ä¸ãˆãŸæ—¥æ™‚ã§ã™ã€‚UTC ã«ãªã£ã¦ã„ã‚‹ã®ã§æ³¨æ„ã§ã™ã€‚
`NextTransitionTime` ã¯ã€æ¬¡ã« `State` ãŒå¤‰åŒ–ã™ã‚‹æ—¥æ™‚ã§ã™ã€‚`AtTime` ã®æ—¥æ™‚ãŒ "OPEN"ãªã‚‰ã° "CLOSED"ã€"CLOSED" ãªã‚‰ã° "OPEN" ã¨ãªã‚‹æ—¥æ™‚ã§ã™ã€‚

```json
{
  "State": "CLOSED",
  "AtTime": "2023-09-17T15:00:00Z",
  "NextTransitionTime": "2023-09-18T15:00:00Z"
}
```

`ssm get-calendar-state` ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ `calendar-names` ã«ã¯ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚’è¤‡æ•°æŒ‡å®šã—ã¦çµ„ã¿åˆã‚ã›ã¦åˆ¤å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```sh
aws ssm get-calendar-state \
    --calendar-names "arn:aws:ssm:ap-northeast-1:123456789012:document/calendar-name1" \
                      "arn:aws:ssm:ap-northeast-1:123456789012:document/calendar-name2" \
    --at-time "2023-09-18T00:00:00+09:00"
```

- è¤‡æ•°ã®ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚’æŒ‡å®šã—ãŸå ´åˆã€å…¨ã¦ã®ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã§ã€ŒOPENã€ã®å ´åˆã«ã€ŒOPENã€ã¨ãªã‚Šã¾ã™ã€‚
- ã©ã‚Œã‹ä¸€ã¤ã§ã‚‚ã€ŒCLOSEDã€ã¨ãªã£ã¦ã„ã‚‹å ´åˆã¯ã€ŒCLOSEDã€ã¨åˆ¤å®šã•ã‚Œã¾ã™ã€‚
  - ã“ã®åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯ã®ä»•æ§˜ä¸Šã€ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ä¸Šã¯ä¼‘æ¥­æ—¥ã ãŒã€è‡¨æ™‚å–¶æ¥­æ—¥ã¨ã™ã‚‹ã¨ã„ã£ãŸå ´åˆã¯åˆ¥ã®ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã®ã¿ã‚’ä½¿ç”¨ã—ã¦åˆ¤å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ã¾ãŸã€ä»–ã®ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚
Google ã®ç¥æ—¥ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã® `iCal å½¢å¼ã®å…¬é–‹ URL` ã‹ã‚‰ ics ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚

```text
â€» ç¥æ—¥ã¯è‡ªå‹•æ›´æ–°ã•ã‚Œã¾ã›ã‚“ã®ã§ã€æ‰‹å‹•ã§ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹ã‹ã€è‡ªå‹•ã§ã‚¤ãƒ³ãƒãƒ¼ãƒˆã§ãã‚‹ã‚ˆã†ãªä»•çµ„ã¿ã‚’æ§‹ç¯‰ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
ä¾‹ãˆã°ã€ã€Œå†…é–£åºœ>ã€Œå›½æ°‘ã®ç¥æ—¥ã€ã«ã¤ã„ã¦ã€ã‹ã‚‰ CSV å½¢å¼ã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦åˆ©ç”¨ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚
2æœˆã«ç¿Œå¹´ã®ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãŒæ²è¼‰ã•ã‚Œã‚‹ã‚ˆã†ã§ã™ã€‚

å†…é–£åºœ>ã€Œå›½æ°‘ã®ç¥æ—¥ã€ã«ã¤ã„ã¦
https://www8.cao.go.jp/chosei/shukujitsu/gaiyou.html
```

ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸéƒ¨åˆ†ã«ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã®è¨˜è¼‰ãŒã‚ã‚‹ã®ã§ `UTC` ã‹ã‚‰ `Asia/Tokyo` å¤‰æ›´ã—ã¾ã™ã€‚ï¼ˆã“ã“ã‚’å¤‰æ›´ã—ãªã„ã§ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ãŸå ´åˆã¯å¾Œè¿°ã—ã¾ã™ã€‚ï¼‰

```text
X-WR-TIMEZONE:Asia/Tokyo
```

[Import calendar] ã§å…ˆã»ã©ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸ ics ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã—ã¾ã™ã€‚

![change-calendar-import-1](/images/ssm/change-calendar/change-calendar-import-1.png)

![change-calendar-import-2](/images/ssm/change-calendar/change-calendar-import-2.png)

ç„¡äº‹ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã•ã‚Œã¾ã—ãŸã€‚

![google-holiday](/images/ssm/change-calendar/change-calendar-google-holiday.png)

å…ˆã»ã©ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’ `UTC` ã‹ã‚‰ `Asia/Tokyo` ã«å¤‰æ›´ã—ã¾ã—ãŸãŒã€å¤‰æ›´ã—ãªã„ã§ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ãŸå ´åˆã¯ã€æ¬¡ã®ã‚ˆã†ãªã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«ãªã‚Šã¾ã™ã€‚

![-google-holiday-utc](/images/ssm/change-calendar/change-calendar-google-holiday-utc.png)

ã€Œæ•¬è€ã®æ—¥ã€ãŒ `Asia/Tokyo` ã§ã¯ã€Œ2023/09/18 9:00 ï½ 2023/09/19 9:00ã€ã«ãªã£ã¦ã—ã¾ã£ã¦ã„ã¾ã™ã€‚
![google-holiday-keirou](/images/ssm/change-calendar/change-calendar-google-holiday-utc-1.png)

ã“ã‚Œã¯ã€ics ãƒ•ã‚¡ã‚¤ãƒ«ã§æ•¬è€ã®æ—¥ã¯æ¬¡ã®ã‚ˆã†ã«å®šç¾©ã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã‚’ ã€Œ2023/09/18 00:00+0:00 ï½ 2023/09/19 00:00+0:00ã€ã¨ã—ã¦ UTC ã§ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ã—ã¾ã†ãŸã‚ã§ã™ã€‚

```text
DTSTART;VALUE=DATE:20230918
DTEND;VALUE=DATE:20230919
DTSTAMP:20230905T140124Z
:
CLASS:PUBLIC
CREATED:20220927T105018Z
DESCRIPTION:ç¥æ—¥
LAST-MODIFIED:20220927T105018Z
SEQUENCE:0
STATUS:CONFIRMED
SUMMARY:æ•¬è€ã®æ—¥
```

UTC ã§ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ãŸã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚’ä½¿ç”¨ã—ãŸå ´åˆã€å…ˆã»ã©ã¯ ã€ŒCLOSEDã€ã¨åˆ¤å®šã•ã‚ŒãŸæ—¥æ™‚ã€€"2023-09-18T00:00:00+09:00"ã€€ã¯æ¬¡ã®ã‚ˆã†ã«ã€ŒOPENã€ã¨åˆ¤å®šã•ã‚Œã¾ã—ãŸã€‚

```sh
aws ssm get-calendar-state \
    --calendar-names "arn:aws:ssm:ap-northeast-1:123456789012:document/calendar-name3" \
    --at-time "2023-09-18T00:00:00+09:00"

{
    "State": "OPEN",
    "AtTime": "2023-09-17T15:00:00Z",
    "NextTransitionTime": "2023-09-18T00:00:00Z"
}
```

Lambda ãªã©ã€Python ã‚’ä½¿ã£ã¦å–å¾—ã™ã‚‹å ´åˆã¯ã€[get_calendar_state](https://boto3.amazonaws.com/v1/documentation/api/latest/reference/services/ssm/client/get_calendar_state.html#) ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

```py
client = boto3.client('ssm')

response = client.get_calendar_state(
    CalendarNames=[
        'ï¼œã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã®åå‰ã¾ãŸã¯ARNï¼',
        'ï¼œã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã®åå‰ã¾ãŸã¯ARNï¼',
    ],
    AtTime='ï¼œåˆ¤å®šå¯¾è±¡ã®æ—¥ä»˜æ™‚åˆ» (çœç•¥æ™‚ã¯ç¾åœ¨æ™‚åˆ»)ï¼'
)

{
    'State': 'OPEN'|'CLOSED',
    'AtTime': 'string',
    'NextTransitionTime': 'string'
}
```

### å¤‰æ›´ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã®æ–™é‡‘

ç„¡æ–™ã§åˆ©ç”¨ã§ãã¾ã™ã€‚
